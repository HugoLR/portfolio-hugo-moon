---
import { Image } from 'astro:assets';
import ArrowBottom from '@/assets/icons/arrow-bottom.svg';
import AvatarGhibli from '@/assets/images/avatar_gibli.png';
import AvatarReality from '@/assets/images/avatar_reality.jpeg';
---

<main class="h-full container mx-auto max-w-4xl px-4 flex flex-col justify-center items-center gap-8">
  <section class="avatar-container cursor-wand text-accent-primary relative w-[100px] h-[100px] group">
    <Image
      id="avatar-primary"
      src={AvatarGhibli}
      width={100}
      height={100}
      loading="eager"
      fetchpriority="high"
      class="rounded-full absolute inset-0 object-cover transition-opacity border border-text-tertiary duration-300 opacity-100"
      alt="Avatar Ghibli Hugo Luna Reyes"
    />
    <Image
      id="avatar-secondary"
      src={AvatarReality}
      width={100}
      height={100}
      loading="lazy"
      class="rounded-full absolute inset-0 object-cover transition-opacity border border-text-tertiary duration-300 opacity-0"
      alt="Avatar Reality Hugo Luna Reyes"
    />
  </section>

  <h1 class="text-2xl font-bold whitespace-nowrap flex items-center gap-2 text-text-primary">
    Hola, soy Hugo Luna ðŸ‘‹
  </h1>

  <a
    href="https://www.linkedin.com/in/hugolr/"
    target="_blank"
    rel="noopener noreferrer"
    class="inline-flex items-center justify-center rounded-2xl px-6 py-2 font-semibold text-xl text-white bg-accent-primary hover:bg-accent-hover transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg"
  >
    Trabajemos juntos
  </a>

  <p class="max-w-3xl text-lg/8 text-text-primary md:text-center">
    <strong class="text-accent-primary font-bold">Sr. Frontend Developer</strong> con mÃ¡s de 6 aÃ±os de experiencia creando interfaces web.
    Disfruto colaborar con equipos multidisciplinarios para entender la lÃ³gica de negocio y transformar ideas en herramientas digitales que mejoran la vida de las personas.
  </p>

  <ArrowBottom class="absolute bottom-9 w-10 h-10 z-10 text-accent-primary animate-vertical-bounce" />
</main>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const container = document.querySelector('.avatar-container') as HTMLElement | null;
    const primaryImg = document.getElementById('avatar-primary') as HTMLImageElement | null;
    const secondaryImg = document.getElementById('avatar-secondary') as HTMLImageElement | null;

    if (!container || !primaryImg || !secondaryImg) {
      return;
    }

    let isShowingSecondary = false;
    let animationTimeout: number | null = null;

    const handleAvatarClick = () => {
      isShowingSecondary = !isShowingSecondary;

      if (animationTimeout !== null) {
        clearTimeout(animationTimeout);
      }

      container.classList.add('animate-tada');

      if (isShowingSecondary) {
        primaryImg.style.opacity = '0';
        secondaryImg.style.opacity = '1';
      } else {
        primaryImg.style.opacity = '1';
        secondaryImg.style.opacity = '0';
      }

      animationTimeout = window.setTimeout(() => {
        container.classList.remove('animate-tada');
        animationTimeout = null;
      }, 1000);
    };

    container.addEventListener('click', handleAvatarClick);

    const cleanup = () => {
      if (animationTimeout !== null) {
        clearTimeout(animationTimeout);
      }
      container.removeEventListener('click', handleAvatarClick);
    };

    window.addEventListener('beforeunload', cleanup);
  });
</script>